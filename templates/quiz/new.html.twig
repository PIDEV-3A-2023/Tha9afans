{% extends 'backBase.html.twig' %}

{% block title %}New Quiz{% endblock %}

{% block body %}

    <style>
        .form input, .form textarea {
            display: block;
            margin-bottom: 10px;
            border-radius: 20px;
        }


        .form label {
            font-weight: bold;
            font-size: medium;
            display: block;
            margin-bottom: 5px;
            color: white;
        }
        .form {
            width: 80%;
            margin: 0 auto;
            background-color: #001A23;
            padding: 60px;
            border-radius: 20px;
        }

        .upload {
            display: block;
            margin-top: auto;
            margin-bottom: auto;
            border-radius: 20px;
        }

        .btn{
            /*display: block;*/
            margin-top: 10px;
            margin-bottom: auto;
            border-radius: 20px;
            color: white;
            border-color: white;
        }
        .btn:hover {
            background-color: white;
            color: #001A23;
        }

        .btnn{
            /*display: block;*/
            margin-top: 10px;
            margin-bottom: auto;
            border-radius: 20px;
            color: white;
            border-color: white;
            background-color: #001A23;
        }
        .btnn:hover {
            background-color: white;
            color: #001A23;
        }
        table {
            width: 90%;
        }

    </style>

    <h1>Create new Quiz</h1>


    <div class="form">
        {{ form_start(form, {'attr': {'novalidate': 'novalidate'}} ) }}
        <div class="row">
            <div class="col">
                {{ form_row(form.quizName, {'attr': {'class': 'form-control custom-class'}}) }}
            </div>
        </div>
        <div class="row">
            <div class="col">
                {{ form_row(form.nbrQuestions, {'attr': {'class': 'form-control custom-class'}}) }}
            </div>
            <div class="col">
                {{ form_row(form.quizCover, {'attr': {'class': 'form-control custom-class'}}) }}
            </div>
        </div>
        <div class="row">
            <div class="col">
                {{ form_row(form.quizDescription, {'attr': {'class': 'form-control custom-class'}}) }}
            </div>
        </div>


        {% if app.session.flashbag.has('success') %}
            <div class="alert alert-success">
                {% for message in app.session.flashbag.get('success') %}
                    {{ message }}
                {% endfor %}
            </div>
        {% endif %}

        {% if app.session.flashbag.has('error') %}
            <div class="alert alert-danger">
                {% for message in app.session.flashbag.get('error') %}
                    {{ message }}
                {% endfor %}
            </div>
        {% endif %}

        <button class="btn">{{ button_label|default('Add Quiz') }}</button>
        {{ form_end(form) }}
    </div>


    <h1>Question index</h1>

    <table class="table">
        <thead>
        <tr>
            <th>Selected</th>
            <th>Image</th>
            <th>Question</th>
            <th>Answer</th>
            <th>Timer</th>
            <th>FirstPossibleAnswer</th>
            <th>SecondPossibleAnswer</th>
            <th>ThirdPossibleAnswer</th>
            <th>actions</th>
        </tr>
        </thead>
        <tbody>
        {% for question in questions %}
            <tr>
                <td>
                <input type="checkbox" >
                </td>
                <td>{% if question.image is not empty %}
                        <img src="{{ path('question_show_image', {'id': question.questionId}) }}" alt="{{ question.question }}" width="100px" height="100px">
                    {% else %}
                        Aucune photo disponible
                    {% endif %}
                </td>
                <td>{{ question.question }}</td>
                <td>{{ question.answer }}</td>
                <td>{{ question.timer }}</td>
                <td>{{ question.firstPossibleAnswer }}</td>
                <td>{{ question.secondPossibleAnswer }}</td>
                <td>{{ question.thirdPossibleAnswer }}</td>
                <td>
                    <div class="dropdown">
                        <button type="button" class="btn p-0 dropdown-toggle hide-arrow" data-bs-toggle="dropdown">
                            <i class="bx bx-dots-vertical-rounded"></i>
                        </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="{{ path('app_question_edit', {'questionId': question.questionId}) }}"
                            ><i class="bx bx-edit-alt me-1"></i> Edit</a
                            >
                            <form method="post" action="{{ path('app_question_delete', {'questionId': question.questionId}) }}" onsubmit="return confirm('Are you sure you want to delete this item?');">
                                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ question.questionId) }}">
                                <button class="dropdown-item"><i class="bx bx-trash me-1"></i> Delete</button>
                            </form>
                        </div>
                    </div>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="9">no records found</td>
            </tr>
        {% endfor %}
        </tbody>

    </table>


    <form action="{{ path('app_question_new') }}" method="POST">
        <button class="btnn" type="submit">Create new</button>
    </form>


    <a href="{{ path('app_quiz_index') }}">back to list</a>

{% endblock %}

